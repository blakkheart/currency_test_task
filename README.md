
# üí± Currency API üí±


## –û–ø–∏—Å–∞–Ω–∏–µ

 –ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è [Kokoc Group](https://kokocgroup.ru/).
 –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫—É—Ä—Å –≤–∞–ª—é—Ç—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Ä—É–±–ª—é –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –¥–∞—Ç—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ
–∞–¥—Ä–µ—Å—É http://localhost:8000/rate/?charcode=AUD&date=2024-01-01 , –æ–Ω–æ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```json
{
"charcode": "AUD",
"date": "2024-01-01",
"rate": 57.0627
}
```
–î–∞–Ω–Ω—ã–µ –ø–æ –≤–∞–ª—é—Ç–∞–º —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç API –¶–ë –†–§ –∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î.

## –°—Ç—ç–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- [Django](https://www.djangoproject.com/).
- [PostgreSQL](https://www.postgresql.org/) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
- [Django-crontab](https://pypi.org/project/django-crontab/) –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
- [Requests](https://requests.readthedocs.io/en/latest/) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API –¶–µ–Ω—Ç—Ä–æ–±–∞–Ω–∫–∞ –†–§.
- [Redis](https://redis.io/) –¥–ª—è —Ä–∞–±–æ—Ç—ã Celery.
- [Celery](https://docs.celeryq.dev/en/stable/) –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤ docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
- [Docker](https://www.docker.com/).

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/blakkheart/currency_test_task.git
```
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd currency_test_task
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
   - Windows
   ```bash
   python -m venv venv
   source venv/Scripts/activate
   ```
   - Linux/macOS
   ```bash
   python3 -m venv venv
   source venv/bin/activate
   ```
4. –û–±–Ω–æ–≤–∏—Ç–µ [pip](https://pip.pypa.io/en/stable/):
   - Windows
   ```bash
   (venv) python -m pip install --upgrade pip
   ```
   - Linux/macOS
   ```bash
   (venv) python3 -m pip install --upgrade pip
   ```
5. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt:
   ```bash
   (venv) pip install -r currency_rate/requirements.txt
   ```
–°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª *.env* –ø–æ –ø—Ä–∏–º–µ—Ä—É —Å —Ñ–∞–π–ª–æ–º *.env.example*, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.



## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ  

 - ### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å docker:

	1. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
	```bash
	docker compose up
	```
	2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
	```bash
	docker compose exec backend python manage.py makemigrations
	docker compose exec backend python manage.py migrate
	``` 
	3. –°–æ–±–µ—Ä–∏—Ç–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏–∫—É:
	```bash
	docker compose exec backend python manage.py collectstatic
	docker compose exec backend cp -r /currency_app/collected_static/. /backend_static/static/
	```
	
- ### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–µ–∑ docker:
	1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å —Ñ–∞–π–ª–æ–º manage.py:
	```bash
	cd currency_rate
	```
	2. –°–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:
	```bash
	(venv) python manage.py makemigrations
	(venv) python manage.py migrate
	```
	3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á:
	```bash
	(venv) python manage.py crontab add 
	```
	–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ –≤ —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥:
	```bash
	(venv) python manage.py crontab show
	(venv) python manage.py crontab remove
	```
	4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
	```bash
	(venv) python manage.py runserver
	```
–ï—Å–ª–∏ –≤—Å–µ —Å–¥–µ–ª–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É localhost:8000 –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API.
–î–æ—Å—Ç—É–ø–Ω—ã –¥–≤–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ - localhost:8000/rate/?charcode={–í–ê–õ–Æ–¢–ê}&date={–î–ê–¢–ê} –∏ localhost:8000/admin/

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–µ–Ω—è—Ç—å –≤—Ä–µ–º—è –æ–ø—Ä–æ—Å–∞ API –¶–ë –†–§, –∏–∑–º–µ–Ω–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π *CRONJOBS* –≤ —Ñ–∞–π–ª–µ *settings.py*, –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ docker, –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π *CELERY_BEAT_SCHEDULE.schedule*, –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ docker, –∏–ª–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å, –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã: 
```bash
python manage.py load_data
```
–¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏–∑–º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø–æ –∞–¥—Ä–µ—Å—É localhost:8000/admin/ :
```bash
python manage.py createsuperuser
```
